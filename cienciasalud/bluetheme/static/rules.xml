<?xml version="1.0" encoding="UTF-8"?>
<rules
    xmlns="http://namespaces.plone.org/diazo"
    xmlns:css="http://namespaces.plone.org/diazo/css"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

    <theme href="theme.html" css:if-content="#visual-portal-wrapper" />

    <rules css:if-content="#visual-portal-wrapper">
        <!-- Add meta tags -->
        <drop theme="/html/head/meta" />
        <after content="/html/head/meta" theme-children="/html/head" />

        <!-- Copy style, script and link tags in the order they appear in the content -->
        <drop theme="/html/head/link" />
        <drop theme="/html/head/style" />
        <drop theme="/html/head/script" />

        <after
            content="/html/head/style | /html/head/script | /html/head/link"
            theme-children="/html/head"
            />

        <!-- Head: title -->
        <replace theme="/html/head/title" content="html/head/title" />

        <!-- Base tag -->
        <replace theme="base" content="base" />
        <!-- Drop styles in the head - these are added back by including them from Plone -->
        <copy attributes="*" css:theme="#logo > a" css:content="#portal-logo" />
        <replace css:theme-children="#search" css:content-children="#portal-searchbox" />
        <replace css:theme-children="#menu" css:content="#portal-globalnav" />
        <replace css:theme="#feature > div.content" css:content="#portlets-above div.portletCarouselWrapper" />
        <replace css:theme="#contents" css:content="#content" />
        <replace css:theme-children="#colone" css:content-children="#portal-column-two" />
        <replace css:theme-children="#footer" css:content-children="#portal-footer" />

        <!-- Pull in Plone CSS -->
    </rules>

</rules>
